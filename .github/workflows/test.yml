name: Test action

on: [push]

jobs:
  hello:
    runs-on: ubuntu-latest
    name: Send a notification
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
#      - name: Get package name and version
#        id:
#        uses:

      - name: Get package info
        id: package
        uses: talyguryn/sample-github-action@v3

      - name: Get the output
        run: |
          echo "name: ${{ steps.package.outputs.name }}"
          echo "version: ${{ steps.package.outputs.version }}"

      - name: Send a message
        uses: codex-team/action-codexbot-notify@v1
        with:
          webhook: ${{ secrets.CODEX_BOT_CHAT }}
          message: 'ðŸ“¦ [${{ steps.package.outputs.name }}](${{ steps.package.outputs.npmjs-link }}) ${{ steps.package.outputs.version }}'
          parse_mode: 'markdown'
          disable_web_page_preview: true